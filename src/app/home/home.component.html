<app-category-slider [Categories]="allCategories"></app-category-slider>




<div class="flex flex-wrap  flex-col  md:flex-row  justify-center mt-5">

  <input type="text" [(ngModel)]="pname" class="form-control z-50 relative" placeholder="search..">

  <div class="p-3 grid lg:grid-cols-6 md:grid-cols-4 sm:grid-cols-2 xs:grid-cols-1 gap-2">
    @for (p of allProducts|search:pname ; track $index) {

    <div
      class=" col-span-1 flex flex-col gap-1  items-center  w-full  border border-gray-300 hover:border-gray-600  rounded-md pb-2 justify-between">
      <div class="flex flex-col  gap-2 items-center">

        <img [src]="p.imageCover" class="rounded-md" alt="" [routerLink]="['/productDetails' ,p._id ,p.title ]">

        <!-- <h5>{{p.category.name}}</h5> -->
        <h4 class="text-sm font-bold text-center">{{p.title}}</h4>
        <div class="flex gap-1">
          <span class="text-sm text-gray-600">{{p.price}}EGP</span>
          <!-- <span>{{p.ratingsAverage}} -->
          <!-- <i class="fa-solid fa-star rating-color"></i> -->
          <!-- </span> -->
        </div>
      </div>
      <!-- <button (click)="addToCart(p._id)" class="  bg-main py-1  px-2 rounded btn text-sm text-white "><i
          class="fa-solid fa-cart-shopping"></i> add to cart
      </button> -->


      <button (click)="addToCart(p._id)" class="  bg-main py-1  px-2 rounded text-sm text-white ">

        <i class="fa-solid fa-circle-notch fa-spin" *ngIf="loadingStates[p._id]"></i>

        <span *ngIf="!loadingStates[p._id]">Add to cart</span>
      </button>

    </div>
    }
    @empty {
    <h1 class="text-main text-7xl col-span-4">no result</h1>
    }
  </div>



</div>